{% extends "base.html" %}

{% block content %}
<p style="text-align: center; color: #666;">Upload your trained model and ECG features to classify heartbeat types</p>

<!-- Model Upload Section -->
<div class="upload-section">
    <h3>1. Upload Trained Model</h3>
    <form action="/upload_model" method="post" enctype="multipart/form-data">
        <input type="file" name="model_file" accept=".pkl" required>
        <br>
        <button type="submit">Upload Model</button>
    </form>
    
    {% if model_success %}
        <p class="success">✅ {{ model_success }}</p>
    {% endif %}
    
    {% if model_error %}
        <p class="error">❌ {{ model_error }}</p>
    {% endif %}
    
    {% if not model_loaded %}
        <p class="info">Please upload your trained model file (.pkl) to get started</p>
    {% endif %}
</div>

<!-- Data Upload Section -->
<div class="upload-section">
    <h3>2. Upload ECG Features</h3>
    {% if model_loaded %}
        <form action="/upload_data" method="post" enctype="multipart/form-data">
            <input type="file" name="data_file" accept=".csv,.xlsx,.xls" required>
            <br>
            <button type="submit">Upload Data & Make Predictions</button>
        </form>
    {% else %}
        <p class="info">Upload a model first before uploading data</p>
    {% endif %}
    
    {% if data_error %}
        <p class="error">❌ {{ data_error }}</p>
    {% endif %}
</div>

{% if model_loaded %}
    <div style="margin-top: 30px; padding: 20px; background-color: #d4edda; border-radius: 5px;">
        <h4 style="color: #155724; margin: 0;">✅ Model Status: Loaded Successfully</h4>
        <p style="color: #155724; margin: 5px 0 0 0;">Ready to process ECG data for classification</p>
    </div>
{% endif %}

{% endblock %}
